<app-logged-user [user]="user"></app-logged-user>
<div>
<h2 class="title">Share your experiences with us</h2>

    <div *ngIf="user; else noUser">
        
        <form [formGroup]="postForm" (submit)="post()">
            <div>
                <mat-form-field appearance="fill">
                    <mat-label>User ID:</mat-label>
                    <input matInput  type="text"  name={{user.user_id}} formControlName="user_id" required>
                    <mat-error *ngIf="postForm.get('user_id')?.invalid">{{getErrorMessage('user_id')}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field appearance="fill">
                    <mat-label>Title:</mat-label>
                    <input matInput  type="text"  formControlName="title" required>
                    <mat-error *ngIf="postForm.get('title')?.invalid">{{getErrorMessage('title')}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field appearance="fill">
                    <mat-label>Content:</mat-label>
                    <textarea matInput  type="text"  rows="6" cols="6"  formControlName="content" required></textarea>
                    <mat-error *ngIf="postForm.get('content')?.invalid">{{getErrorMessage('content')}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <button mat-raised-button type="submit" [disabled]="postForm.invalid">Submit</button>
            </div>
        </form>
    </div>
</div>


<ng-template #noUser>
    <p class="sub-header">You have to login in order to share  
        <span>
            <button mat-raised-button [routerLink]="['/login']">Login / Register</button>
        </span>
    </p>
</ng-template>




